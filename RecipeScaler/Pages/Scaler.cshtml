@page
@model RecipeScaler.Pages.ScalerModel
@{
    ViewData["Title"] = "Recipe Scaler";
}

<h1>Recipe Scaler</h1>

<!-- Main form for entering servings and ingredients -->
<form method="post">
    <!-- Input: Original number of servings the recipe is for -->
    <div class="mb-3">
        <label>Original Servings:</label>
        <input asp-for="OriginalServings" class="form-control" />
    </div>

    <!-- Input: Desired number of servings to scale the recipe to -->
    <div class="mb-3">
        <label>Desired Servings:</label>
        <input asp-for="DesiredServings" class="form-control" />
    </div>

    <h4>Ingredients</h4>

    <!-- Container that holds all ingredient rows; JS will add more here -->
    <div id="ingredients-container">
        <!-- First row is rendered manually to avoid model binding issues -->
        <div class="row mb-2 ingredient-row">
            <div class="col">
                <input asp-for="Ingredients[0].Name" class="form-control" placeholder="Ingredient name" />
            </div>
            <div class="col">
                <input asp-for="Ingredients[0].Quantity" class="form-control" placeholder="Quantity" />
            </div>
            <div class="col">
                <input asp-for="Ingredients[0].Unit" class="form-control" placeholder="Unit (e.g. cups)" />
            </div>
        </div>
    </div>

    <!-- Button to add more ingredient rows dynamically -->
    <button type="button" class="btn btn-secondary mb-3" onclick="addIngredient()">Add Ingredient</button>

    <!-- Submit button to scale the recipe -->
    <button type="submit" class="btn btn-primary">Scale Recipe</button>
</form>

<!-- If we have scaled ingredients to display, show them as a list -->
@if (Model.ScaledIngredients.Any())
{
    <h4 class="mt-4">Scaled Ingredients</h4>
    <ul>
        @foreach (var ingredient in Model.ScaledIngredients)
        {
            <li>@ingredient.Quantity @ingredient.Unit of @ingredient.Name</li>
        }
    </ul>
}

<!-- Section to load page-specific scripts -->
@section Scripts {
    <!-- Reference to external JavaScript file -->
    <script src="~/js/scaler.js"></script>
}